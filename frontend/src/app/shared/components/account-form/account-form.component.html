<mat-card class="account-form">
  <mat-card-title>Add New Account</mat-card-title>
  <mat-card-content>
    <form (ngSubmit)="handleSubmit()">

      <mat-form-field appearance="outline">
        <mat-label>Select User</mat-label>
        <mat-select [(ngModel)]="newAccount.user.id" name="userId" required>
          <mat-option *ngFor="let user of users()" [value]="user.id">
            {{ user.username }}
          </mat-option>
        </mat-select>
      </mat-form-field>


      <mat-form-field appearance="outline" hideRequiredMarker="true">
        <mat-label>Account Type</mat-label>
        <mat-select [(ngModel)]="newAccount.accountType"
                    (ngModelChange)="accountType.set($event)"
                    name="accountType"
                    required>
          <mat-option *ngFor="let type of accountTypes"
                      [value]="type">{{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div *ngIf="newAccount.accountType === 'INVESTMENT'">
        <mat-form-field appearance="outline">
          <mat-label>Investment Type</mat-label>
          <input matInput
                 type="text"
                 [(ngModel)]="newAccount.investmentType"
                 name="investmentType">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Bank Name</mat-label>
          <input matInput
                 type="text"
                 [(ngModel)]="newAccount.bankName"
                 name="bankName">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Portfolio Value</mat-label>
          <input matInput
                 type="number"
                 [(ngModel)]="newAccount.portfolioValue"
                 name="portfolioValue">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Account Number</mat-label>
          <input matInput
                 type="text"
                 [(ngModel)]="newAccount.accountNumber"
                 name="accountNumber">
        </mat-form-field>
      </div>

      <div *ngIf="['CHECKING', 'SAVINGS', 'CREDIT'].includes(newAccount.accountType)">
        <mat-form-field appearance="outline">
          <mat-label>Bank Name</mat-label>
          <input matInput
                 type="text"
                 [(ngModel)]="newAccount.bankName"
                 name="bankName">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Account Number</mat-label>
          <input matInput
                 type="text"
                 [(ngModel)]="newAccount.accountNumber"
                 name="accountNumber">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Spending Limit</mat-label>
          <input matInput
                 type="number"
                 [(ngModel)]="newAccount.maxSpending"
                 name="maxSpending">
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" hideRequiredMarker="true">
        <mat-label>Balance</mat-label>
        <input matInput
               type="number"
               [(ngModel)]="newAccount.balance"
               name="balance"
               required>
      </mat-form-field>

      <button type="submit"
              mat-raised-button
              color="primary"
              class="submit-button">
        âž• Add Account
      </button>

    </form>
  </mat-card-content>
</mat-card>
